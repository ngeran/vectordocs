<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-routing/bgp/bgp-route-selection/index" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Route Selection | Vector Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://ngeran.github.io/vectordocs/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://ngeran.github.io/vectordocs/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://ngeran.github.io/vectordocs/docs/routing/bgp/bgp-route-selection"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Route Selection | Vector Docs"><meta data-rh="true" name="description" content="Before the router even starts the route selection process it needs to make sure that the route is valid, checks the Martian routes, AS loops and next-hop reachability."><meta data-rh="true" property="og:description" content="Before the router even starts the route selection process it needs to make sure that the route is valid, checks the Martian routes, AS loops and next-hop reachability."><link data-rh="true" rel="icon" href="/vectordocs/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://ngeran.github.io/vectordocs/docs/routing/bgp/bgp-route-selection"><link data-rh="true" rel="alternate" href="https://ngeran.github.io/vectordocs/docs/routing/bgp/bgp-route-selection" hreflang="en"><link data-rh="true" rel="alternate" href="https://ngeran.github.io/vectordocs/docs/routing/bgp/bgp-route-selection" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Route Selection","item":"https://ngeran.github.io/vectordocs/docs/routing/bgp/bgp-route-selection"}]}</script><link rel="alternate" type="application/rss+xml" href="/vectordocs/blog/rss.xml" title="Vector Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/vectordocs/blog/atom.xml" title="Vector Docs Atom Feed"><link rel="stylesheet" href="/vectordocs/assets/css/styles.8bf3e2fe.css">
<script src="/vectordocs/assets/js/runtime~main.278a6937.js" defer="defer"></script>
<script src="/vectordocs/assets/js/main.10291918.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="/vectordocs/"><svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 19 20" fill="none" focusable="false" aria-hidden="true" class="navbar__brand" imageClassName="navbar__logo" titleClassName="navbar__title text--truncate"><path d="M6.20742 9.02441H0.12651C0.0566404 9.02441 0 9.08105 0 9.15092V9.85095C0 9.92081 0.0566404 9.97745 0.12651 9.97745H6.20742C6.27728 9.97745 6.33392 9.92081 6.33392 9.85095V9.15092C6.33392 9.08105 6.27728 9.02441 6.20742 9.02441Z" fill="currentColor"></path><path d="M18.8754 9.02441H12.7945C12.7246 9.02441 12.668 9.08105 12.668 9.15092V9.85095C12.668 9.92081 12.7246 9.97745 12.7945 9.97745H18.8754C18.9453 9.97745 19.0019 9.92081 19.0019 9.85095V9.15092C19.0019 9.08105 18.9453 9.02441 18.8754 9.02441Z" fill="currentColor"></path><path d="M9.02441 0.12657V6.20747C9.02441 6.27734 9.08105 6.33398 9.15092 6.33398H9.85094C9.92081 6.33398 9.97745 6.27734 9.97745 6.20747V0.12657C9.97745 0.0567002 9.92081 5.96046e-05 9.85094 5.96046e-05H9.15092C9.08105 5.96046e-05 9.02441 0.0567002 9.02441 0.12657Z" fill="currentColor"></path><path d="M9.0332 12.8028V18.8837C9.0332 18.9536 9.08984 19.0103 9.15971 19.0103H9.85974C9.9296 19.0103 9.98624 18.9536 9.98624 18.8837V12.8028C9.98624 12.733 9.9296 12.6763 9.85974 12.6763H9.15971C9.08984 12.6763 9.0332 12.733 9.0332 12.8028Z" fill="currentColor"></path><path d="M8.0754 7.40936C8.07773 7.40703 8.07772 7.40325 8.07539 7.40093L3.17103 2.50499C3.12043 2.45439 3.04452 2.45439 2.99392 2.50499L2.50475 2.99417C2.45415 3.04477 2.45415 3.12068 2.50475 3.17128L7.90425 8.57078C7.98157 8.6481 8.07962 8.72957 8.07962 8.83892V10.1715C8.07962 10.2305 8.05431 10.2811 8.02058 10.3233L2.50475 15.8391C2.45415 15.8897 2.45415 15.9656 2.50475 16.0162L2.99392 16.5054C3.04452 16.556 3.12043 16.556 3.17103 16.5054L8.07118 11.6053L8.3495 11.3269C8.77964 10.8968 9.02422 10.3149 9.02422 9.70762V9.31122C9.02422 8.70397 8.77964 8.12203 8.3495 7.6919L8.0754 7.41779C8.07307 7.41546 8.07307 7.41169 8.0754 7.40936Z" fill="currentColor"></path><path d="M10.99 8.68324C10.99 8.68467 10.9917 8.68538 10.9927 8.68437L16.5058 3.17128C16.5564 3.12067 16.5564 3.04477 16.5058 2.99417L16.0166 2.50499C15.966 2.45439 15.8901 2.45439 15.8395 2.50499L10.9394 7.40514L10.661 7.68346C10.2309 8.1136 9.98633 8.69554 9.98633 9.30279V9.69918C9.98633 10.3064 10.2309 10.8884 10.661 11.3185L10.9394 11.5968L15.8395 16.497C15.8901 16.5476 15.966 16.5476 16.0166 16.497L16.5058 16.0078C16.5564 15.9572 16.5564 15.8813 16.5058 15.8307L11.1063 10.4312C11.029 10.3539 10.9309 10.2724 10.9309 10.1631V8.83048C10.9309 8.77311 10.9548 8.7237 10.9871 8.68226C10.9881 8.68106 10.99 8.68172 10.99 8.68324Z" fill="currentColor"></path></svg></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/vectordocs/docs/routing/bgp/as_path">Posts</a><a class="navbar__item navbar__link" href="/vectordocs/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/ngeran/VectorDocs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/vectordocs/docs/routing/bgp/as_path"><span title="Routing" class="categoryLinkLabel_W154">Routing</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/vectordocs/docs/routing/bgp/as_path"><span title="BGP" class="categoryLinkLabel_W154">BGP</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/vectordocs/docs/routing/bgp/as_path"><span title="AS Path" class="linkLabel_WmDU">AS Path</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/vectordocs/docs/routing/bgp/bgp-attributes"><span title="BGP Attributes" class="linkLabel_WmDU">BGP Attributes</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/vectordocs/docs/routing/bgp/bgp-route-selection"><span title="Route Selection" class="linkLabel_WmDU">Route Selection</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/vectordocs/docs/routing/bgp/fsm"><span title="Finite State Machine" class="linkLabel_WmDU">Finite State Machine</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/vectordocs/docs/routing/bgp/local_preference"><span title="Local Preference" class="linkLabel_WmDU">Local Preference</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/vectordocs/docs/routing/ospf/lsa1"><span title="OSPF" class="categoryLinkLabel_W154">OSPF</span></a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/vectordocs/docs/junos/tagging"><span title="Junos" class="categoryLinkLabel_W154">Junos</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/vectordocs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Routing</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">BGP</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Route Selection</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Route Selection</h1></header><blockquote>
<p>Before the router even starts the route selection process it needs to make sure that the route is valid, checks the <strong>Martian</strong> routes, <strong>AS loops</strong> and <strong>next-hop reachability</strong>.</p>
</blockquote>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="best-path-selection">Best Path Selection<a href="#best-path-selection" class="hash-link" aria-label="Direct link to Best Path Selection" title="Direct link to Best Path Selection" translate="no">​</a></h2>
<table><thead><tr><th style="text-align:left">Attribute</th><th style="text-align:left">Preference</th><th style="text-align:left">Default Behavior</th></tr></thead><tbody><tr><td style="text-align:left">1. Route Preference</td><td style="text-align:left">Lowest</td><td style="text-align:left">Default value is 170</td></tr><tr><td style="text-align:left">2. Local Preference</td><td style="text-align:left">Highest</td><td style="text-align:left">Default learned value is 100</td></tr><tr><td style="text-align:left">3. AS-Path</td><td style="text-align:left">Shortest</td><td style="text-align:left">Usualy the first time route selection occurs</td></tr><tr><td style="text-align:left">4. Origin</td><td style="text-align:left">Lowest</td><td style="text-align:left">IGP (I) &gt;  EGP (E), EGP &gt; incomplete (?)</td></tr><tr><td style="text-align:left">5. Multi Exit Discriminator (MED)</td><td style="text-align:left">Lowest</td><td style="text-align:left">Compared when routes are learned from the same AS</td></tr><tr><td style="text-align:left">6. Route Type</td><td style="text-align:left">External</td><td style="text-align:left">Internal vs External, External prefered</td></tr><tr><td style="text-align:left">7. IGP Cost</td><td style="text-align:left">Lowest</td><td style="text-align:left">lowest cost towards the BGP next-hop</td></tr><tr><td style="text-align:left">8. Internal vs External</td><td style="text-align:left">Lowest</td><td style="text-align:left">Lowest R-ID,  Oldest active route</td></tr><tr><td style="text-align:left">10. Cluster List</td><td style="text-align:left">Shortest</td><td style="text-align:left">When route reflection is used</td></tr><tr><td style="text-align:left">11. Peer IP Address</td><td style="text-align:left">Lowest</td><td style="text-align:left">Multiple peerings between the same router</td></tr></tbody></table>
<blockquote>
<p>For JUNOS the route selection results and criteria can be seen in the output of:</p>
</blockquote>
<ul>
<li class=""><strong>show route details</strong></li>
<li class=""><strong>show route extensive</strong></li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="lowest-route-preference">Lowest Route Preference<a href="#lowest-route-preference" class="hash-link" aria-label="Direct link to Lowest Route Preference" title="Direct link to Lowest Route Preference" translate="no">​</a></h2>
<p>The Juniper default BGP preference is 170 below you can see a route selection which is based on a non-default route preference of 160.
Junos OS is kind enough to tell us why the second route has lost in the route selection.</p>
<blockquote>
<p>The Inactive Reason is <strong>Route Preference</strong></p>
</blockquote>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">jcluser@vMX4# run show route 192.168.250.0/24 exact detail       </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inet.0: 14 destinations, 15 routes (14 active,0 holddown,0 hidden)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.250.0/24 (2 entries, 1 announced)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        *BGP    Preference: 160/-101</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop type: Router, Next hop index: 595</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Address: 0xc4b5f5c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next-hop reference count: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Source: 10.100.34.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop: 10.100.34.1 via ge-0/0/1.0,selected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Session Id: 0x141</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                State: &lt;Active Ext&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Local AS: 64533 Peer AS: 64522</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Age: 7 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Validation State: unverified</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Task: BGP_64522.10.100.34.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Announcement bits(2):0-KRT 4-BGP_RT_Background</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                AS path: 64522 I </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Accepted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Localpref: 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Router ID: 10.100.100.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread: junos-main </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         BGP    Preference: 170/-101</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop type: Router,Next hop index: 596</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Address: 0xc4b5ef4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next-hop reference count: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Source: 10.100.24.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop: 10.100.24.1 via ge-0/0/0.0,selected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Session Id: 0x140</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                State: &lt;Ext&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Inactive reason: Route Preference</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Local AS: 64533 Peer AS: 64522</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Age: 9:18 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Validation State: unverified </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Task: BGP_64522.10.100.24.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                AS path: 64522 I </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Accepted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Localpref: 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Router ID: 10.100.100.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread: junos-main </span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="highest-local-preference">Highest Local Preference<a href="#highest-local-preference" class="hash-link" aria-label="Direct link to Highest Local Preference" title="Direct link to Highest Local Preference" translate="no">​</a></h2>
<p>The default BGP <strong>Local Preference</strong> is 100 the route below has been selected for its higher non-default value of <strong>200</strong>.</p>
<blockquote>
<p>The Inactive Reason is <strong>Local Preference</strong></p>
</blockquote>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">jcluser@vMX4# run show route 192.168.250.0/24 exact detail </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inet.0: 14 destinations, 15 routes (14 active, 0 holddown, 0 hidden)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.250.0/24 (2 entries, 1 announced)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        *BGP    Preference: 170/-201</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop type: Router, Next hop index: 595</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Address: 0xc4b5f5c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next-hop reference count: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Source: 10.100.34.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop: 10.100.34.1 via ge-0/0/1.0, selected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Session Id: 0x141</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                State: &lt;Active Ext&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Local AS: 64533 Peer AS: 64522</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Age: 24 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Validation State: unverified </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Task: BGP_64522.10.100.34.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Announcement bits (2): 0-KRT 4-BGP_RT_Background </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                AS path: 64522 I </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Accepted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Localpref: 200</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Router ID: 10.100.100.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread: junos-main </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         BGP    Preference: 170/-101</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop type: Router, Next hop index: 596</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Address: 0xc4b5ef4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next-hop reference count: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Source: 10.100.24.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop: 10.100.24.1 via ge-0/0/0.0, selected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Session Id: 0x140</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                State: &lt;Ext&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Inactive reason: Local Preference</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Local AS: 64533 Peer AS: 64522</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Age: 51:52 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Validation State: unverified </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Task: BGP_64522.10.100.24.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                AS path: 64522 I </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Accepted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Localpref: 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Router ID: 10.100.100.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread: junos-main </span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="shortest-as-path">Shortest AS Path<a href="#shortest-as-path" class="hash-link" aria-label="Direct link to Shortest AS Path" title="Direct link to Shortest AS Path" translate="no">​</a></h2>
<p>The route below has been selected because of its shortest AS Path.<br>
<!-- -->The selected route has 1 AS vs 5 AS.</p>
<blockquote>
<p>The Inactive Reason is <strong>AS Path</strong></p>
</blockquote>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">jcluser@vMX4# run show route 192.168.250.0/24 exact detail </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inet.0: 14 destinations, 15 routes (14 active, 0 holddown, 0 hidden)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.250.0/24 (2 entries, 1 announced)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        *BGP    Preference: 170/-101</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop type: Router, Next hop index: 596</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Address: 0xc4b5ef4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next-hop reference count: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Source: 10.100.24.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop: 10.100.24.1 via ge-0/0/0.0, selected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Session Id: 0x140</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                State: &lt;Active Ext&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Local AS: 64533 Peer AS: 64522</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Age: 1:23:04 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Validation State: unverified </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Task: BGP_64522.10.100.24.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Announcement bits (2): 0-KRT 4-BGP_RT_Background </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                AS path: 64522 I </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Accepted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Localpref: 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Router ID: 10.100.100.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread: junos-main </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         BGP    Preference: 170/-101</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop type: Router, Next hop index: 595</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Address: 0xc4b5f5c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next-hop reference count: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Source: 10.100.34.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop: 10.100.34.1 via ge-0/0/1.0, selected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Session Id: 0x141</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                State: &lt;Ext&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Inactive reason: AS path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Local AS: 64533 Peer AS: 64522</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Age: 15 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Validation State: unverified </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Task: BGP_64522.10.100.34.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                AS path: 64522 64522 64522 64522 64522 I </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Accepted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Localpref: 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Router ID: 10.100.100.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread: junos-main </span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="lowest-origin">Lowest Origin<a href="#lowest-origin" class="hash-link" aria-label="Direct link to Lowest Origin" title="Direct link to Lowest Origin" translate="no">​</a></h2>
<p>The active route is chosen based on its lower origin setting of I (IGP), compared to the second route which has an origin of ? (Incomplete).</p>
<blockquote>
<p>The inactive reason is <strong>Origin</strong></p>
</blockquote>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">jcluser@vMX4# run show route 192.168.250.0/24 exact detail    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inet.0: 14 destinations, 15 routes (14 active, 0 holddown, 0 hidden)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.250.0/24 (2 entries, 1 announced)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        *BGP    Preference: 170/-101</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop type: Router, Next hop index: 596</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Address: 0xc4b5ef4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next-hop reference count: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Source: 10.100.24.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop: 10.100.24.1 via ge-0/0/0.0, selected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Session Id: 0x140</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                State: &lt;Active Ext&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Local AS: 64533 Peer AS: 64522</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Age: 1:45:36 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Validation State: unverified </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Task: BGP_64522.10.100.24.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Announcement bits (2): 0-KRT 4-BGP_RT_Background </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                AS path: 64522 I </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Accepted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Localpref: 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Router ID: 10.100.100.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread: junos-main </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         BGP    Preference: 170/-101</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop type: Router, Next hop index: 595</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Address: 0xc4b5f5c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next-hop reference count: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Source: 10.100.34.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop: 10.100.34.1 via ge-0/0/1.0, selected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Session Id: 0x141</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                State: &lt;Ext Changed&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Inactive reason: Origin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Local AS: 64533 Peer AS: 64522</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Age: 10 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Validation State: unverified </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Task: BGP_64522.10.100.34.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                AS path: 64522 ? </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Accepted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Localpref: 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Router ID: 10.100.100.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread: junos-main </span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="lowest-med">Lowest MED<a href="#lowest-med" class="hash-link" aria-label="Direct link to Lowest MED" title="Direct link to Lowest MED" translate="no">​</a></h2>
<p>The active route has a MED value of 20 shown as metric in the output.<br>
<!-- -->The second route has a MED of 150.</p>
<blockquote>
<p>Inactive reason <strong>Not Best in its group - Route Metric or MED comparison</strong></p>
</blockquote>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">jjcluser@vMX4# run show route 192.168.250.0/24 exact detail       </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inet.0: 14 destinations, 15 routes (14 active, 0 holddown, 0 hidden)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.250.0/24 (2 entries, 1 announced)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        *BGP    Preference: 170/-101</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop type: Router, Next hop index: 595</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Address: 0xc4b5f5c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next-hop reference count: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Source: 10.100.34.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop: 10.100.34.1 via ge-0/0/1.0, selected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Session Id: 0x141</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                State: &lt;Active Ext&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Local AS: 64533 Peer AS: 64522</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Age: 36:03 Metric: 20 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Validation State: unverified </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Task: BGP_64522.10.100.34.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Announcement bits (2): 0-KRT 4-BGP_RT_Background </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                AS path: 64522 I </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Accepted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Localpref: 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Router ID: 10.100.100.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread: junos-main </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         BGP    Preference: 170/-101</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop type: Router, Next hop index: 596</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Address: 0xc4b5ef4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next-hop reference count: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Source: 10.100.24.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop: 10.100.24.1 via ge-0/0/0.0, selected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Session Id: 0x140</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                State: &lt;NotBest Ext&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Inactive reason: Not Best in its group - </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 Route Metric or MED comparison</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Local AS: 64533 Peer AS: 64522</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Age: 13 Metric: 150 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Validation State: unverified </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Task: BGP_64522.10.100.24.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                AS path: 64522 I </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Accepted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Localpref: 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Router ID: 10.100.100.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread: junos-main</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="route-type">Route Type<a href="#route-type" class="hash-link" aria-label="Direct link to Route Type" title="Direct link to Route Type" translate="no">​</a></h2>
<p>The directly adverised external route is preferred over the external route learned via an internal neighbor.
This can be seen from the Local AS and Peer AS line.<br>
<!-- -->The <strong>Local AS</strong> and <strong>Peer AS</strong> line gives information on if the route is learned from an<br>
<!-- -->internal or external neighbor.<br>
<!-- -->The order of preference is:</p>
<ul>
<li class="">Local redistributed routes into BGP <strong>(Interior)</strong></li>
<li class="">External route directly learned from External BGP peers <strong>(Exterior)</strong></li>
<li class="">External route learned through an Internal BGP peer <strong>(Exterior via Interior)</strong></li>
</ul>
<blockquote>
<p>Inactive reason <strong>Interior &gt; Exterior &gt; Exterior via Interior</strong></p>
</blockquote>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">jcluser@vMX6# run show route 192.168.250.0/24 exact detail </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inet.0: 11 destinations, 12 routes (11 active, 0 holddown, 0 hidden)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.250.0/24 (2 entries, 1 announced)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        *BGP    Preference: 170/-101</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop type: Router, Next hop index: 587</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Address: 0xc4b5dbc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next-hop reference count: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Source: 10.100.46.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop: 10.100.46.1 via ge-0/0/3.0, selected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Session Id: 0x141</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                State: &lt;Active Ext&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Local AS: 64544 Peer AS: 64533</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Age: 50 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Validation State: unverified </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Task: BGP_64533.10.100.46.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Announcement bits (3):0-KRT 4-BGP_RT_Background </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                     5-Resolve tree 1 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                AS path: 64533 I </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Accepted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Localpref: 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Router ID: 10.100.100.4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread: junos-main </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         BGP    Preference: 170/-101</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop type: Indirect, Next hop index: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Address: 0xc4b5d54</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next-hop reference count: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Source: 10.100.100.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop type: Router, Next hop index: 349</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop: 100.123.0.1 via fxp0.0, selected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Session Id: 0x0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Protocol next hop: 10.100.25.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Indirect next hop: 0xc61de84 338 INH Session ID: 0x0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                State: &lt;Int Ext&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Inactive reason: Interior &gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 Exterior &gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 Exterior via Interior</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Local AS: 64544 Peer AS: 64544</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Age: 6:58 Metric2: 0 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Validation State: unverified </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Task: BGP_64544.10.100.100.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                AS path: 64522 I </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Accepted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Localpref: 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Router ID: 10.100.100.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread: junos-main </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="lowest-igp-cost">Lowest IGP cost<a href="#lowest-igp-cost" class="hash-link" aria-label="Direct link to Lowest IGP cost" title="Direct link to Lowest IGP cost" translate="no">​</a></h2>
<p>The active route is chosen based on the lowest IGP cost to the BGP next-hop, shown as protocol next-hop in the output.
The IGP cost is shown as metric2 in the output.<br>
<!-- -->The active route has a metric2 of 5 vs metric2 of 10 for the inactive.</p>
<blockquote>
<p>Inactive reason <strong>IGP metric</strong></p>
</blockquote>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">jcluser@vMX4# run show route 192.168.252.0/24 exact detail    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inet.0: 16 destinations, 18 routes (16 active, 0 holddown, 0 hidden)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.252.0/24 (2 entries, 1 announced)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        *BGP    Preference: 170/-101</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop type: Router, Next hop index: 595</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Address: 0xc4b5f5c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next-hop reference count: 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Source: 10.100.34.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop: 10.100.34.1 via ge-0/0/1.0, selected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop: 10.100.24.1 via ge-0/0/1.0 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Session Id: 0x141</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                State: &lt;Active Ext&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Local AS: 64533 Peer AS: 64522</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Age: 16:59       Metric2: 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Validation State: unverified </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Task: BGP_64522.10.100.34.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Announcement bits (2): 0-KRT 4-BGP_RT_Background </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                AS path: 64522 64544 I </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Accepted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Localpref: 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Router ID: 10.100.100.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread: junos-main </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         BGP    Preference: 170/-101</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Address: 0xc4b5fc4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next-hop reference count: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Source: 10.100.24.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop type: Router, Next hop index: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop: 10.100.34.1 via ge-0/0/1.0, selected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop: 10.100.24.1 via ge-0/0/1.0 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Session Id: 0x0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                State: &lt;NotBest Ext Changed&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Inactive reason: Not Best in its group - IGP metric</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Local AS: 64533 Peer AS: 64522</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Age: 16:59       Metric2: 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Validation State: unverified </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Task: BGP_64522.10.100.24.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                AS path: 64522 64544 I </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Accepted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Localpref: 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Router ID: 10.100.100.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread: junos-main </span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="lowest-r-id-or-oldest-active">Lowest R-ID or Oldest Active<a href="#lowest-r-id-or-oldest-active" class="hash-link" aria-label="Direct link to Lowest R-ID or Oldest Active" title="Direct link to Lowest R-ID or Oldest Active" translate="no">​</a></h2>
<blockquote>
<p>Internal sessions <strong>Router-ID</strong></p>
</blockquote>
<p>The inactive route has a router-id 10.100.100.2 which is higher than the 10.100.100.1.</p>
<blockquote>
<p>Inactive reason <strong>Not Best in its group - Router ID</strong></p>
</blockquote>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">jcluser@vMX4# run show route 192.168.252.0/24 exact detail </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inet.0: 16 destinations, 18 routes (16 active, 0 holddown, 0 hidden)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.252.0/24 (2 entries, 1 announced)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        *BGP    Preference: 170/-101</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop type: Router, Next hop index: 595</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Address: 0xc4b5f5c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next-hop reference count: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Source: 10.100.34.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop: 10.100.34.1 via ge-0/0/1.0, selected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Session Id: 0x141</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                State: &lt;Active Ext&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Local AS: 64533 Peer AS: 64522</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Age: 1:00 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Validation State: unverified </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Task: BGP_64522.10.100.34.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Announcement bits (2): 0-KRT 4-BGP_RT_Background </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                AS path: 64522 64544 I </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Accepted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Localpref: 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Router ID: 10.100.100.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread: junos-main </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         BGP    Preference: 170/-101</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop type: Router, Next hop index: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Address: 0xc4b5fc4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next-hop reference count: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Source: 10.100.24.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop: 10.100.24.1 via ge-0/0/0.0, selected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Session Id: 0x0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                State: &lt;NotBest Ext Changed&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Inactive reason: Not Best in its group - </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 Router ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Local AS: 64533 Peer AS: 64522</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Age: 1:00 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Validation State: unverified </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Task: BGP_64522.10.100.24.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                AS path: 64522 64544 I </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Accepted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Localpref: 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Router ID: 10.100.100.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread: junos-main </span><br></span></code></pre></div></div>
<blockquote>
<p>External sessions <strong>Router-ID</strong></p>
</blockquote>
<p>To use the Router-ID as a tie-breaker the command <strong>path-selection external-router-id</strong> needs to be coinfigured.
The inactive route behaves as the internal and has a router-id 10.100.100.2 which is higher than the 10.100.100.1.</p>
<blockquote>
<p>Inactive reason <strong>Not Best in its group - Router ID</strong></p>
</blockquote>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">jcluser@vMX4# run show route 192.168.252.0/24 exact detail </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inet.0: 16 destinations, 18 routes (16 active, 0 holddown, 0 hidden)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.252.0/24 (2 entries, 1 announced)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        *BGP    Preference: 170/-101</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop type: Router, Next hop index: 595</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Address: 0xc4b5f5c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next-hop reference count: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Source: 10.100.34.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop: 10.100.34.1 via ge-0/0/1.0, selected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Session Id: 0x141</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                State: &lt;Active Ext&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Local AS: 64533 Peer AS: 64522</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Age: 1:00       Metric2: 5 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Validation State: unverified </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Task: BGP_64522.10.100.34.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Announcement bits (2): 0-KRT 4-BGP_RT_Background </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                AS path: 64522 64544 I </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Accepted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Localpref: 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Router ID: 10.100.100.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread: junos-main </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         BGP    Preference: 170/-101</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop type: Router, Next hop index: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Address: 0xc4b5fc4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next-hop reference count: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Source: 10.100.24.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop: 10.100.24.1 via ge-0/0/0.0, selected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Session Id: 0x0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                State: &lt;NotBest Ext Changed&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Inactive reason: Not Best in its group - </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 Router ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Local AS: 64533 Peer AS: 64522</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Age: 1:00</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Validation State: unverified </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Task: BGP_64522.10.100.24.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                AS path: 64522 64544 I </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Accepted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Localpref: 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Router ID: 10.100.100.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread: junos-main </span><br></span></code></pre></div></div>
<blockquote>
<p>External sessions</p>
</blockquote>
<p>For Satbility reasons the oldest route is prefered</p>
<blockquote>
<p>The inactive reason <strong>Not Best in its group - Active preferred</strong></p>
</blockquote>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">jcluser@vMX4# run show route 192.168.252.0/24 exact detail </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inet.0: 16 destinations, 18 routes (16 active, 0 holddown, 0 hidden)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.252.0/24 (2 entries, 1 announced)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        *BGP    Preference: 170/-101</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop type: Router, Next hop index: 595</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Address: 0xc4b5f5c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next-hop reference count: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Source: 10.100.34.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop: 10.100.34.1 via ge-0/0/1.0, selected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Session Id: 0x141</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                State: &lt;Active Ext&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Local AS: 64533 Peer AS: 64522</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Age: 1:00 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Validation State: unverified </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Task: BGP_64522.10.100.34.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Announcement bits (2): 0-KRT 4-BGP_RT_Background </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                AS path: 64522 64544 I </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Accepted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Localpref: 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Router ID: 10.100.100.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread: junos-main </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         BGP    Preference: 170/-101</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop type: Router, Next hop index: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Address: 0xc4b5fc4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next-hop reference count: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Source: 10.100.24.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop: 10.100.24.1 via ge-0/0/0.0, selected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Session Id: 0x0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                State: &lt;NotBest Ext Changed&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Inactive reason: Not Best in its group - </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 Active preferred</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Local AS: 64533 Peer AS: 64522</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Age: 1:00 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Validation State: unverified </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Task: BGP_64522.10.100.24.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                AS path: 64522 64544 I </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Accepted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Localpref: 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Router ID: 10.100.100.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread: junos-main </span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="cluster-list">Cluster List<a href="#cluster-list" class="hash-link" aria-label="Direct link to Cluster List" title="Direct link to Cluster List" translate="no">​</a></h2>
<p>The shortest cluster list will be preferred when we have multiple route reflectors.</p>
<blockquote>
<p>Inactive reason <strong>Not Best in its group - Cluster list length</strong></p>
</blockquote>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Output TBD </span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="lowest-peer-ip">Lowest Peer IP<a href="#lowest-peer-ip" class="hash-link" aria-label="Direct link to Lowest Peer IP" title="Direct link to Lowest Peer IP" translate="no">​</a></h2>
<p>This is the last tie-breaker we can come this when for load-balancing purposed two routers peer two or more time with eachother.
The route has been selected based on the lowest peer ip address, shown as <strong>Source</strong> in the output.</p>
<blockquote>
<p>Inactive reason is <strong>Not Best in its group - Update source</strong></p>
</blockquote>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">jcluser@vMX2# run show route 192.168.251.0/24 exact detail </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inet.0: 26 destinations, 27 routes (26 active, 0 holddown, 0 hidden)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.251.0/24 (2 entries, 1 announced)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        *BGP    Preference: 170/-101</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop type: Indirect, Next hop index: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Address: 0xc4b6234</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next-hop reference count: 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Source: 10.100.150.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop type: Router, Next hop index: 607</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop: 10.100.12.1 via ge-0/0/0.0, selected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Session Id: 0x143</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Protocol next hop: 10.100.100.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Indirect next hop: 0xc633184 1048574 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                   INH Session ID: 0x144</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                State: &lt;Active Int Ext&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Local AS: 64500 Peer AS: 64500</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Age: 1:37 Metric2: 10 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Validation State: unverified </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ORR Generation-ID: 0 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Task: BGP_64500.10.100.150.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Announcement bits (3): 0-KRT 4-BGP_RT_Background </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                       5-Resolve tree 4 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                AS path: 64544 I  (Originator)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Cluster list:  1.1.1.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Originator ID: 10.100.100.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Accepted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Localpref: 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Router ID: 10.100.150.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread: junos-main </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         BGP    Preference: 170/-101</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop type: Indirect, Next hop index: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Address: 0xc4b6234</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next-hop reference count: 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Source: 10.100.150.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop type: Router, Next hop index: 607</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Next hop: 10.100.12.1 via ge-0/0/0.0, selected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Session Id: 0x143</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Protocol next hop: 10.100.100.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Indirect next hop: 0xc633184 1048574 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                   INH Session ID: 0x144</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                State: &lt;NotBest Int Ext&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Inactive reason: Not Best in its group - </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 Update source</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Local AS: 64500 Peer AS: 64500</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Age: 1:37 Metric2: 10 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Validation State: unverified </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ORR Generation-ID: 0 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Task: BGP_64500.10.100.150.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                AS path: 64544 I  (Originator)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Cluster list:  2.2.2.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Originator ID: 10.100.100.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Accepted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Localpref: 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Router ID: 10.100.150.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Thread: junos-main </span><br></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/vectordocs/docs/tags/bgp">BGP</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/vectordocs/docs/tags/routing">Routing</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/vectordocs/docs/tags/juniper">Juniper</a></li></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/ngeran/VectorDocs/tree/main/docs/routing/bgp/bgp-route-selection/index.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/vectordocs/docs/routing/bgp/bgp-attributes"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">BGP Attributes</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/vectordocs/docs/routing/bgp/fsm"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Finite State Machine</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#best-path-selection" class="table-of-contents__link toc-highlight">Best Path Selection</a></li><li><a href="#lowest-route-preference" class="table-of-contents__link toc-highlight">Lowest Route Preference</a></li><li><a href="#highest-local-preference" class="table-of-contents__link toc-highlight">Highest Local Preference</a></li><li><a href="#shortest-as-path" class="table-of-contents__link toc-highlight">Shortest AS Path</a></li><li><a href="#lowest-origin" class="table-of-contents__link toc-highlight">Lowest Origin</a></li><li><a href="#lowest-med" class="table-of-contents__link toc-highlight">Lowest MED</a></li><li><a href="#route-type" class="table-of-contents__link toc-highlight">Route Type</a></li><li><a href="#lowest-igp-cost" class="table-of-contents__link toc-highlight">Lowest IGP cost</a></li><li><a href="#lowest-r-id-or-oldest-active" class="table-of-contents__link toc-highlight">Lowest R-ID or Oldest Active</a></li><li><a href="#cluster-list" class="table-of-contents__link toc-highlight">Cluster List</a></li><li><a href="#lowest-peer-ip" class="table-of-contents__link toc-highlight">Lowest Peer IP</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer_xBL4"><p class="copyright_g70o">Copyright © 2026 VectorDocs @ ngeran[io]</p></footer></div>
</body>
</html>