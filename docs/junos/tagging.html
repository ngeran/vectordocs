<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-junos/tagging" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Tagging | Vector Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://ngeran.github.io/VectorDocs/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://ngeran.github.io/VectorDocs/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://ngeran.github.io/VectorDocs/docs/junos/tagging"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Tagging | Vector Docs"><meta data-rh="true" name="description" content="Junos VLAN Tagging Options Explained"><meta data-rh="true" property="og:description" content="Junos VLAN Tagging Options Explained"><link data-rh="true" rel="icon" href="/VectorDocs/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://ngeran.github.io/VectorDocs/docs/junos/tagging"><link data-rh="true" rel="alternate" href="https://ngeran.github.io/VectorDocs/docs/junos/tagging" hreflang="en"><link data-rh="true" rel="alternate" href="https://ngeran.github.io/VectorDocs/docs/junos/tagging" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Tagging","item":"https://ngeran.github.io/VectorDocs/docs/junos/tagging"}]}</script><link rel="alternate" type="application/rss+xml" href="/VectorDocs/blog/rss.xml" title="Vector Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/VectorDocs/blog/atom.xml" title="Vector Docs Atom Feed"><link rel="stylesheet" href="/VectorDocs/assets/css/styles.8bf3e2fe.css">
<script src="/VectorDocs/assets/js/runtime~main.eb144a56.js" defer="defer"></script>
<script src="/VectorDocs/assets/js/main.b8299d80.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="/VectorDocs/"><svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 19 20" fill="none" focusable="false" aria-hidden="true" class="navbar__brand" imageClassName="navbar__logo" titleClassName="navbar__title text--truncate"><path d="M6.20742 9.02441H0.12651C0.0566404 9.02441 0 9.08105 0 9.15092V9.85095C0 9.92081 0.0566404 9.97745 0.12651 9.97745H6.20742C6.27728 9.97745 6.33392 9.92081 6.33392 9.85095V9.15092C6.33392 9.08105 6.27728 9.02441 6.20742 9.02441Z" fill="currentColor"></path><path d="M18.8754 9.02441H12.7945C12.7246 9.02441 12.668 9.08105 12.668 9.15092V9.85095C12.668 9.92081 12.7246 9.97745 12.7945 9.97745H18.8754C18.9453 9.97745 19.0019 9.92081 19.0019 9.85095V9.15092C19.0019 9.08105 18.9453 9.02441 18.8754 9.02441Z" fill="currentColor"></path><path d="M9.02441 0.12657V6.20747C9.02441 6.27734 9.08105 6.33398 9.15092 6.33398H9.85094C9.92081 6.33398 9.97745 6.27734 9.97745 6.20747V0.12657C9.97745 0.0567002 9.92081 5.96046e-05 9.85094 5.96046e-05H9.15092C9.08105 5.96046e-05 9.02441 0.0567002 9.02441 0.12657Z" fill="currentColor"></path><path d="M9.0332 12.8028V18.8837C9.0332 18.9536 9.08984 19.0103 9.15971 19.0103H9.85974C9.9296 19.0103 9.98624 18.9536 9.98624 18.8837V12.8028C9.98624 12.733 9.9296 12.6763 9.85974 12.6763H9.15971C9.08984 12.6763 9.0332 12.733 9.0332 12.8028Z" fill="currentColor"></path><path d="M8.0754 7.40936C8.07773 7.40703 8.07772 7.40325 8.07539 7.40093L3.17103 2.50499C3.12043 2.45439 3.04452 2.45439 2.99392 2.50499L2.50475 2.99417C2.45415 3.04477 2.45415 3.12068 2.50475 3.17128L7.90425 8.57078C7.98157 8.6481 8.07962 8.72957 8.07962 8.83892V10.1715C8.07962 10.2305 8.05431 10.2811 8.02058 10.3233L2.50475 15.8391C2.45415 15.8897 2.45415 15.9656 2.50475 16.0162L2.99392 16.5054C3.04452 16.556 3.12043 16.556 3.17103 16.5054L8.07118 11.6053L8.3495 11.3269C8.77964 10.8968 9.02422 10.3149 9.02422 9.70762V9.31122C9.02422 8.70397 8.77964 8.12203 8.3495 7.6919L8.0754 7.41779C8.07307 7.41546 8.07307 7.41169 8.0754 7.40936Z" fill="currentColor"></path><path d="M10.99 8.68324C10.99 8.68467 10.9917 8.68538 10.9927 8.68437L16.5058 3.17128C16.5564 3.12067 16.5564 3.04477 16.5058 2.99417L16.0166 2.50499C15.966 2.45439 15.8901 2.45439 15.8395 2.50499L10.9394 7.40514L10.661 7.68346C10.2309 8.1136 9.98633 8.69554 9.98633 9.30279V9.69918C9.98633 10.3064 10.2309 10.8884 10.661 11.3185L10.9394 11.5968L15.8395 16.497C15.8901 16.5476 15.966 16.5476 16.0166 16.497L16.5058 16.0078C16.5564 15.9572 16.5564 15.8813 16.5058 15.8307L11.1063 10.4312C11.029 10.3539 10.9309 10.2724 10.9309 10.1631V8.83048C10.9309 8.77311 10.9548 8.7237 10.9871 8.68226C10.9881 8.68106 10.99 8.68172 10.99 8.68324Z" fill="currentColor"></path></svg></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/VectorDocs/docs/routing/bgp/as_path">Posts</a><a class="navbar__item navbar__link" href="/VectorDocs/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/ngeran/VectorDocs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/VectorDocs/docs/routing/bgp/as_path"><span title="Routing" class="categoryLinkLabel_W154">Routing</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/VectorDocs/docs/routing/bgp/as_path"><span title="BGP" class="categoryLinkLabel_W154">BGP</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/VectorDocs/docs/routing/ospf/lsa1"><span title="OSPF" class="categoryLinkLabel_W154">OSPF</span></a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/VectorDocs/docs/junos/tagging"><span title="Junos" class="categoryLinkLabel_W154">Junos</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/VectorDocs/docs/junos/tagging"><span title="Tagging" class="linkLabel_WmDU">Tagging</span></a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/VectorDocs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Junos</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Tagging</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Tagging</h1></header><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="junos-vlan-tagging-options-explained">Junos VLAN Tagging Options Explained<a href="#junos-vlan-tagging-options-explained" class="hash-link" aria-label="Direct link to Junos VLAN Tagging Options Explained" title="Direct link to Junos VLAN Tagging Options Explained" translate="no">​</a></h2>
<p>Here&#x27;s a comparison of <code>vlan-tagging</code>, <code>flexible-vlan-tagging</code>, and <code>encapsulation flexible-ethernet-services</code>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-vlan-tagging">1. <code>vlan-tagging</code><a href="#1-vlan-tagging" class="hash-link" aria-label="Direct link to 1-vlan-tagging" title="Direct link to 1-vlan-tagging" translate="no">​</a></h3>
<ul>
<li class=""><strong>Configuration Level:</strong> Physical Interface (<code>set interfaces &lt;interface-name&gt; vlan-tagging</code>)</li>
<li class=""><strong>Purpose:</strong> Enables basic IEEE 802.1Q VLAN tagging support on the physical interface.</li>
<li class=""><strong>Capabilities:</strong>
<ul>
<li class="">Allows logical units (<code>unit</code>) under this interface to be configured with a <em>single</em> VLAN ID (<code>set interfaces &lt;interface-name&gt; unit &lt;number&gt; vlan-id &lt;id&gt;</code>).</li>
<li class="">Supports sending and receiving standard single-tagged Ethernet frames.</li>
<li class="">Can support one untagged VLAN using the <code>native-vlan-id</code> option on the physical interface.</li>
</ul>
</li>
<li class=""><strong>Limitations:</strong>
<ul>
<li class="">Does <em>not</em> natively support receiving or sending double-tagged (QinQ/Stacked VLAN) frames on logical units.</li>
<li class="">Does <em>not</em> easily support mixing tagged and untagged traffic across <em>different</em> logical units on the same physical interface (only one native/untagged VLAN is easily supported for the whole port).</li>
<li class="">Limited flexibility in VLAN mapping per logical unit.</li>
</ul>
</li>
<li class=""><strong>Typical Use Case:</strong>
<ul>
<li class="">Standard &quot;trunk&quot; ports connecting to switches or other routers where multiple VLANs, each identified by a single tag, need to be carried.</li>
<li class="">Simple Layer 2 or Layer 3 sub-interfaces.</li>
</ul>
</li>
<li class=""><strong>Example:</strong>
<div class="language-junos codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-junos codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Configure the physical interface for basic single-tagging</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set interfaces ge-0/0/1 vlan-tagging</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set interfaces ge-0/0/1 native-vlan-id 10  # Optional: VLAN 10 is untagged</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Configure logical units with single VLAN IDs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set interfaces ge-0/0/1 unit 100 vlan-id 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set interfaces ge-0/0/1 unit 100 family inet address 192.168.100.1/24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set interfaces ge-0/0/1 unit 200 vlan-id 200</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set interfaces ge-0/0/1 unit 200 family inet address 192.168.200.1/24</span><br></span></code></pre></div></div>
</li>
</ul>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-flexible-vlan-tagging">2. <code>flexible-vlan-tagging</code><a href="#2-flexible-vlan-tagging" class="hash-link" aria-label="Direct link to 2-flexible-vlan-tagging" title="Direct link to 2-flexible-vlan-tagging" translate="no">​</a></h3>
<ul>
<li class=""><strong>Configuration Level:</strong> Physical Interface (<code>set interfaces &lt;interface-name&gt; flexible-vlan-tagging</code>)</li>
<li class=""><strong>Purpose:</strong> Enables advanced VLAN tagging capabilities, allowing for more complex scenarios on a single physical interface.</li>
<li class=""><strong>Capabilities:</strong>
<ul>
<li class="">Supports logical units with <em>single</em> VLAN IDs (<code>vlan-id</code>).</li>
<li class="">Supports logical units with <em>double</em> (stacked/QinQ) VLAN tags (<code>vlan-tags outer &lt;tag&gt; inner &lt;tag&gt;</code>).</li>
<li class="">Supports logical units accepting <em>untagged</em> traffic (<code>vlan-id none</code>, though configuration details vary slightly by platform/scenario).</li>
<li class="">Allows mixing single-tagged, double-tagged, and untagged logical units on the <em>same</em> physical interface.</li>
<li class="">Supports VLAN ID lists and ranges on logical units (<code>vlan-id-list [ list-of-vlans ]</code>).</li>
<li class="">Often a prerequisite for advanced Layer 2 features and services.</li>
</ul>
</li>
<li class=""><strong>Limitations:</strong>
<ul>
<li class="">Slightly more complex configuration as each logical unit&#x27;s tagging requirement must be explicitly defined.</li>
</ul>
</li>
<li class=""><strong>Typical Use Case:</strong>
<ul>
<li class="">QinQ deployments (Service Provider NNI, Enterprise Campus).</li>
<li class="">Interfaces needing to handle a mix of single-tagged customer traffic and double-tagged infrastructure traffic.</li>
<li class="">Interfaces where some services are tagged and others are untagged.</li>
<li class="">Aggregation points requiring flexible VLAN mapping.</li>
</ul>
</li>
<li class=""><strong>Example:</strong>
<div class="language-junos codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-junos codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Configure the physical interface for advanced tagging</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set interfaces xe-0/1/0 flexible-vlan-tagging</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Configure a logical unit for single-tagged traffic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set interfaces xe-0/1/0 unit 101 description &quot;Single Tagged Customer A&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set interfaces xe-0/1/0 unit 101 vlan-id 101</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set interfaces xe-0/1/0 unit 101 family bridge # Example for L2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Configure a logical unit for double-tagged (QinQ) traffic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set interfaces xe-0/1/0 unit 500 description &quot;QinQ Customer B (Outer 500, Inner 50)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set interfaces xe-0/1/0 unit 500 vlan-tags outer 500 inner 50</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set interfaces xe-0/1/0 unit 500 family bridge # Example for L2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Configure a logical unit for untagged traffic (config might vary slightly)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># This often requires specific encapsulation like vlan-bridge or ethenet-bridge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set interfaces xe-0/1/0 unit 0 description &quot;Untagged Management&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set interfaces xe-0/1/0 unit 0 encapsulation vlan-bridge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Note: No &#x27;vlan-id&#x27; or &#x27;vlan-tags&#x27; means it might handle untagged frames if configured correctly</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set interfaces xe-0/1/0 unit 0 family inet address 10.0.0.1/24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Configure a logical unit accepting a list of VLANs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set interfaces xe-0/1/0 unit 999 description &quot;VLAN List Service&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set interfaces xe-0/1/0 unit 999 vlan-id-list [ 200 205-210 300 ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set interfaces xe-0/1/0 unit 999 encapsulation vlan-bridge</span><br></span></code></pre></div></div>
</li>
</ul>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-encapsulation-flexible-ethernet-services">3. <code>encapsulation flexible-ethernet-services</code><a href="#3-encapsulation-flexible-ethernet-services" class="hash-link" aria-label="Direct link to 3-encapsulation-flexible-ethernet-services" title="Direct link to 3-encapsulation-flexible-ethernet-services" translate="no">​</a></h3>
<ul>
<li class=""><strong>Configuration Level:</strong> Physical Interface (<code>set interfaces &lt;interface-name&gt; encapsulation flexible-ethernet-services</code>)</li>
<li class=""><strong>Purpose:</strong> Primarily used on MX Series routers (and some other platforms) to allow a <em>mix of different Layer 2 encapsulation types</em> (like bridge, ccc, vpls) on different logical units of the <em>same</em> physical interface. It fundamentally changes how the interface PFE (Packet Forwarding Engine) processes frames to support this service flexibility.</li>
<li class=""><strong>Capabilities:</strong>
<ul>
<li class="">Allows logical units (<code>unit</code>) under the same physical interface to have different Ethernet service encapsulations (e.g., <code>encapsulation vlan-bridge</code>, <code>encapsulation vlan-ccc</code>, <code>encapsulation vlan-vpls</code>, <code>encapsulation ethernet-ccc</code>, etc.).</li>
<li class="">Enables maximum service multiplexing onto a single physical port.</li>
</ul>
</li>
<li class=""><strong>Important Note:</strong> This option <em>must often be used in conjunction with <code>flexible-vlan-tagging</code></em> if the services running on the logical units need to handle tagged frames (single or double). <code>flexible-ethernet-services</code> defines the <em>service type</em> flexibility, while <code>flexible-vlan-tagging</code> defines the <em>VLAN tag</em> flexibility.</li>
<li class=""><strong>Limitations:</strong>
<ul>
<li class="">Platform-specific (mainly MX Series).</li>
<li class="">Adds configuration complexity.</li>
<li class="">Cannot be combined with <code>vlan-tagging</code> on the same physical interface.</li>
</ul>
</li>
<li class=""><strong>Typical Use Case:</strong>
<ul>
<li class="">Service Provider edge routers (PE) terminating multiple customers with different L2VPN service types (E-Line/CCC, E-LAN/VPLS, E-Tree) or bridging requirements on the same physical link (NNI or UNI).</li>
<li class="">Data Center interconnects requiring diverse L2 service types.</li>
</ul>
</li>
<li class=""><strong>Example:</strong>
<div class="language-junos codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-junos codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Configure the physical interface for flexible service encapsulations AND flexible tagging</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set interfaces xe-0/2/0 encapsulation flexible-ethernet-services</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set interfaces xe-0/2/0 flexible-vlan-tagging</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Logical unit for a bridged service (single tag)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set interfaces xe-0/2/0 unit 1000 description &quot;Bridged Service VLAN 1000&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set interfaces xe-0/2/0 unit 1000 encapsulation vlan-bridge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set interfaces xe-0/2/0 unit 1000 vlan-id 1000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Logical unit for a VPLS service (QinQ tag)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set interfaces xe-0/2/0 unit 2000 description &quot;VPLS Service Outer 200 Inner 20&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set interfaces xe-0/2/0 unit 2000 encapsulation vlan-vpls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set interfaces xe-0/2/0 unit 2000 vlan-tags outer 200 inner 20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Logical unit for a CCC/L2Circuit service (single tag)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set interfaces xe-0/2/0 unit 3000 description &quot;CCC/E-Line Service VLAN 3000&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set interfaces xe-0/2/0 unit 3000 encapsulation vlan-ccc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set interfaces xe-0/2/0 unit 3000 vlan-id 3000</span><br></span></code></pre></div></div>
</li>
</ul>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="summary-table">Summary Table<a href="#summary-table" class="hash-link" aria-label="Direct link to Summary Table" title="Direct link to Summary Table" translate="no">​</a></h3>
<table><thead><tr><th style="text-align:left">Feature</th><th style="text-align:left"><code>vlan-tagging</code></th><th style="text-align:left"><code>flexible-vlan-tagging</code></th><th style="text-align:left"><code>encapsulation flexible-ethernet-services</code> (+ <code>flexible-vlan-tagging</code>)</th></tr></thead><tbody><tr><td style="text-align:left"><strong>Config Level</strong></td><td style="text-align:left">Physical Interface</td><td style="text-align:left">Physical Interface</td><td style="text-align:left">Physical Interface</td></tr><tr><td style="text-align:left"><strong>Primary Purpose</strong></td><td style="text-align:left">Basic 802.1Q tagging</td><td style="text-align:left">Advanced VLAN tagging (QinQ, Mixed)</td><td style="text-align:left">Mix different L2 service types on units</td></tr><tr><td style="text-align:left"><strong>Single Tag Support</strong></td><td style="text-align:left">Yes (via <code>vlan-id</code> on unit)</td><td style="text-align:left">Yes (via <code>vlan-id</code> on unit)</td><td style="text-align:left">Yes (if <code>flexible-vlan-tagging</code> also used)</td></tr><tr><td style="text-align:left"><strong>Double Tag (QinQ) Support</strong></td><td style="text-align:left">No</td><td style="text-align:left">Yes (via <code>vlan-tags</code> on unit)</td><td style="text-align:left">Yes (if <code>flexible-vlan-tagging</code> also used)</td></tr><tr><td style="text-align:left"><strong>Untagged Support</strong></td><td style="text-align:left">Yes (one <code>native-vlan-id</code>)</td><td style="text-align:left">Yes (per unit, requires specific config)</td><td style="text-align:left">Yes (per unit, requires specific config)</td></tr><tr><td style="text-align:left"><strong>Mixed Tag/Untagged Units</strong></td><td style="text-align:left">No (except native)</td><td style="text-align:left">Yes</td><td style="text-align:left">Yes</td></tr><tr><td style="text-align:left"><strong>VLAN Lists/Ranges</strong></td><td style="text-align:left">No</td><td style="text-align:left">Yes</td><td style="text-align:left">Yes</td></tr><tr><td style="text-align:left"><strong>Mixed L2 Encapsulations per Port</strong></td><td style="text-align:left">No</td><td style="text-align:left">No</td><td style="text-align:left">Yes (e.g., bridge, ccc, vpls on same port)</td></tr><tr><td style="text-align:left"><strong>Common Platforms</strong></td><td style="text-align:left">All Junos platforms</td><td style="text-align:left">Most modern Junos platforms</td><td style="text-align:left">Primarily MX Series (and some others like PTX, ACX)</td></tr><tr><td style="text-align:left"><strong>Use When...</strong></td><td style="text-align:left">Simple trunk port, single tags only.</td><td style="text-align:left">Need QinQ, mix tagged/untagged, VLAN lists.</td><td style="text-align:left">Need to mix L2VPN service types (VPLS, CCC, Bridge) on one port (MX).</td></tr></tbody></table>
<hr>
<p><strong>In essence:</strong></p>
<ul>
<li class="">Use <code>vlan-tagging</code> for the simplest trunk port needs.</li>
<li class="">Use <code>flexible-vlan-tagging</code> when you need any advanced VLAN tagging like QinQ or mixing tagged/untagged traffic on different units of the same port.</li>
<li class="">Use <code>encapsulation flexible-ethernet-services</code> (usually <em>with</em> <code>flexible-vlan-tagging</code>) on platforms like MX when you need to run different <em>types</em> of Layer 2 services (bridging, VPLS, CCC, etc.) concurrently on logical units sharing the same physical interface.</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/ngeran/VectorDocs/tree/main/docs/junos/tagging.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/VectorDocs/docs/routing/ospf/packet-types"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Packet Types</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#junos-vlan-tagging-options-explained" class="table-of-contents__link toc-highlight">Junos VLAN Tagging Options Explained</a><ul><li><a href="#1-vlan-tagging" class="table-of-contents__link toc-highlight">1. <code>vlan-tagging</code></a></li><li><a href="#2-flexible-vlan-tagging" class="table-of-contents__link toc-highlight">2. <code>flexible-vlan-tagging</code></a></li><li><a href="#3-encapsulation-flexible-ethernet-services" class="table-of-contents__link toc-highlight">3. <code>encapsulation flexible-ethernet-services</code></a></li><li><a href="#summary-table" class="table-of-contents__link toc-highlight">Summary Table</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer_xBL4"><p class="copyright_g70o">Copyright © 2026 VectorDocs @ ngeran[io]</p></footer></div>
</body>
</html>